<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <title>Dashboard</title>

  <script 
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" 
  crossorigin="anonymous"
  ></script>

  <script
  type="text/javascript"
  src="{{ url_for('static', filename='index.js') }}"
  ></script>

</head>

<body>
  <div class="container text-center">
    <h1 class="mb-2">Welcome {{ user.first_name }} {{ user.last_name }}</h1>
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" 
    data-bs-target="#enrollModal">Enroll Fingerprint
  </button>
    <div class="text-start">

      <h4>Matric Number: {{ user.matric_no }} </h4><br>

      <h3>Courses Registerd:</h3>
      <ol>
      {% for enrolled_courses, courses in enrolled %}
      <li>{{ enrolled_courses.course_code}}: {{ courses.course_title }}</li>
      {% endfor %}
      </ol>

      {% if not disabled %}
      <h3>Add New Courses:</h3>
      <div class="content-section">
      <form method="POST">
        {{ form.hidden_tag() }}
        {{ form.courses }}
        {{ form.submit(class="btn btn-block btn-primary mb-3", disabled=disabled) }}
      </form>
      </div>
      {% endif %}

    </div>
  </div>

  <!-- Add course Modal -->
  <div class="modal fade modal-lg" id="enrollModal" tabindex="-1" 
    aria-labelledby="addCourseModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="addCourseModalLabel">
            Enroll your Fingerprint</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" 
            aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <h4>Click the button below and place your finger on the sensor twice, \
            place your finger again when the light goes off..</h4>
          <button type="button" class="btn btn-primary btn-lg" id="enrollButton">
            Start Enrollment</button>
          <p id="enroll-message"></p>
        </div>

  <script 
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" 
  crossorigin="anonymous"
  ></script>
</body>
</html>